# 更新日志 (CHANGELOG)

本文档记录了项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [1.1.0] - 2024-12-03

### 新增 ✨
- 新增 `export_table_to_csv_with_progress()` 函数，支持导出进度回调
- 新增完整的文件名安全验证功能
  - 检查路径分隔符
  - 检查危险字符
  - 检查 Windows 保留名称
  - 检查文件名长度限制
  - 检查文件名格式（不能以点或空格开头/结尾）
- 新增 `EXAMPLES.md` 文档，包含详细的使用示例
  - HTML 基本示例
  - React 集成示例
  - Vue 集成示例
  - 错误处理示例

### 改进 🚀
- 启用 `wee_alloc` 作为全局分配器，减小 WASM 文件大小约 22%
  - 原始大小: 661KB
  - 优化后大小: 514KB (使用 wasm-opt -Oz)
- 添加链接时优化 (LTO) 配置
- 优化编译参数 (opt-level = "z")
- 增强错误信息的可读性

### 修复 🐛
- 修复 WebAssembly 测试配置问题
  - 创建 `.cargo/config.toml` 配置文件
  - 添加 wasm32 目标的测试运行器配置
- 修复文件名验证不完整的问题

### 测试 🧪
- 新增 `test_filename_validation()` 测试，覆盖 20+ 个测试用例
- 所有 4 个单元测试通过
- 测试覆盖率提升

### 文档 📚
- 更新 README.md，添加新功能说明
- 添加带进度条的完整 HTML 示例
- 创建 EXAMPLES.md 详细使用示例文档
- 创建优化总结文档
- 添加构建脚本 (build.sh)

### 性能优化 ⚡
- 使用 wee_alloc 减少内存占用
- 启用 LTO 优化
- 减少代码生成单元数量
- WASM 文件大小减小 22%

## [1.0.0] - 之前版本

### 初始功能
- 基本的 HTML 表格导出为 CSV 功能
- RAII 模式的资源管理
- 全面的错误处理
- 自定义文件名支持
- 向后兼容的 API

---

## 版本说明

### [1.1.0] vs [1.0.0]

**主要改进**：
1. ✅ 新增进度回调功能，更好地支持大型表格导出
2. ✅ 完善文件名安全验证，提升安全性
3. ✅ WASM 文件大小优化 22%，加载更快
4. ✅ 修复测试配置问题，开发体验更好
5. ✅ 文档更加完善，包含更多示例

**API 兼容性**：
- ✅ 完全向后兼容 1.0.0 版本
- ✅ 所有现有代码无需修改即可升级
- ✅ 新增的功能是可选的

**升级建议**：
- 强烈建议从 1.0.0 升级到 1.1.0
- 无需修改现有代码
- 可选择性地使用新增的进度回调功能

---

## 未来计划

### [1.2.0] - 计划中
- [ ] 支持更多导出格式 (Excel .xlsx, JSON, TSV)
- [ ] 支持自定义 CSV 分隔符
- [ ] 支持列选择（选择性导出列）
- [ ] 支持数据过滤和排序

### [1.3.0] - 计划中
- [ ] 流式处理支持（处理超大表格）
- [ ] 内存使用监控和优化
- [ ] 支持异步导出
- [ ] 支持批量导出压缩包

### [2.0.0] - 长期计划
- [ ] 完全重写核心算法
- [ ] 支持更多数据源（JSON, API）
- [ ] 图形化配置界面
- [ ] 支持模板和样式定制

---

## 贡献者

感谢以下贡献者对项目的支持：

- [@Kurisu](https://github.com/kurisuu) - 项目维护者

---

## 链接

- [GitHub 仓库](https://github.com/kurisuu/wasm-excel-exporter)
- [问题反馈](https://github.com/kurisuu/wasm-excel-exporter/issues)
- [NPM 包](https://www.npmjs.com/package/wasm-excel-exporter)

